{"ast":null,"code":"var _handlers;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport arrayReduce from 'fast-loops/lib/arrayReduce';\nimport objectReduce from 'fast-loops/lib/objectReduce';\nimport generateCSSRule from './generateCSSRule';\nimport objectSortByScore from './objectSortByScore';\nimport getRuleScore from './getRuleScore';\nimport { RULE_TYPE, KEYFRAME_TYPE, FONT_TYPE, STATIC_TYPE } from './styleTypes';\nvar handlers = (_handlers = {}, _defineProperty(_handlers, RULE_TYPE, function (cluster, _ref) {\n  var selector = _ref.selector,\n      declaration = _ref.declaration,\n      support = _ref.support,\n      media = _ref.media;\n  var cssRule = generateCSSRule(selector, declaration);\n\n  if (support) {\n    if (media) {\n      if (!cluster.supportMediaRules[media]) {\n        cluster.supportMediaRules[media] = {};\n      }\n\n      if (!cluster.supportMediaRules[media][support]) {\n        cluster.supportMediaRules[media][support] = '';\n      }\n\n      cluster.supportMediaRules[media][support] += cssRule;\n    } else {\n      if (!cluster.supportRules[support]) {\n        cluster.supportRules[support] = '';\n      }\n\n      cluster.supportRules[support] += cssRule;\n    }\n  } else if (media) {\n    if (!cluster.mediaRules[media]) {\n      cluster.mediaRules[media] = '';\n    }\n\n    cluster.mediaRules[media] += cssRule;\n  } else {\n    cluster.rules += cssRule;\n  }\n}), _defineProperty(_handlers, FONT_TYPE, function (cluster, _ref2) {\n  var fontFace = _ref2.fontFace;\n  cluster.fontFaces += fontFace;\n}), _defineProperty(_handlers, KEYFRAME_TYPE, function (cluster, _ref3) {\n  var keyframe = _ref3.keyframe;\n  cluster.keyframes += keyframe;\n}), _defineProperty(_handlers, STATIC_TYPE, function (cluster, _ref4) {\n  var css = _ref4.css,\n      selector = _ref4.selector;\n\n  if (selector) {\n    cluster.statics += generateCSSRule(selector, css);\n  } else {\n    cluster.statics += css;\n  }\n}), _handlers);\nexport default function clusterCache(cache) {\n  var ruleOrder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var sortedCache = objectSortByScore(cache, function (value) {\n    return getRuleScore(ruleOrder, value.pseudo);\n  });\n  return objectReduce(sortedCache, function (cluster, entry) {\n    var handler = handlers[entry.type];\n\n    if (handler) {\n      handler(cluster, entry);\n    }\n\n    return cluster;\n  }, {\n    mediaRules: {},\n    supportRules: {},\n    supportMediaRules: {},\n    fontFaces: '',\n    statics: '',\n    keyframes: '',\n    rules: ''\n  });\n}","map":{"version":3,"names":["_handlers","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","arrayReduce","objectReduce","generateCSSRule","objectSortByScore","getRuleScore","RULE_TYPE","KEYFRAME_TYPE","FONT_TYPE","STATIC_TYPE","handlers","cluster","_ref","selector","declaration","support","media","cssRule","supportMediaRules","supportRules","mediaRules","rules","_ref2","fontFace","fontFaces","_ref3","keyframe","keyframes","_ref4","css","statics","clusterCache","cache","ruleOrder","arguments","length","undefined","sortedCache","pseudo","entry","handler","type"],"sources":["/Users/hoodboy/Documents/htdocs/TypescriptTextEditor/node_modules/fela-utils/es/clusterCache.js"],"sourcesContent":["var _handlers;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport arrayReduce from 'fast-loops/lib/arrayReduce';\nimport objectReduce from 'fast-loops/lib/objectReduce';\n\nimport generateCSSRule from './generateCSSRule';\nimport objectSortByScore from './objectSortByScore';\nimport getRuleScore from './getRuleScore';\n\nimport { RULE_TYPE, KEYFRAME_TYPE, FONT_TYPE, STATIC_TYPE } from './styleTypes';\n\nvar handlers = (_handlers = {}, _defineProperty(_handlers, RULE_TYPE, function (cluster, _ref) {\n  var selector = _ref.selector,\n      declaration = _ref.declaration,\n      support = _ref.support,\n      media = _ref.media;\n\n  var cssRule = generateCSSRule(selector, declaration);\n\n  if (support) {\n    if (media) {\n      if (!cluster.supportMediaRules[media]) {\n        cluster.supportMediaRules[media] = {};\n      }\n\n      if (!cluster.supportMediaRules[media][support]) {\n        cluster.supportMediaRules[media][support] = '';\n      }\n\n      cluster.supportMediaRules[media][support] += cssRule;\n    } else {\n      if (!cluster.supportRules[support]) {\n        cluster.supportRules[support] = '';\n      }\n\n      cluster.supportRules[support] += cssRule;\n    }\n  } else if (media) {\n    if (!cluster.mediaRules[media]) {\n      cluster.mediaRules[media] = '';\n    }\n\n    cluster.mediaRules[media] += cssRule;\n  } else {\n    cluster.rules += cssRule;\n  }\n}), _defineProperty(_handlers, FONT_TYPE, function (cluster, _ref2) {\n  var fontFace = _ref2.fontFace;\n\n  cluster.fontFaces += fontFace;\n}), _defineProperty(_handlers, KEYFRAME_TYPE, function (cluster, _ref3) {\n  var keyframe = _ref3.keyframe;\n\n  cluster.keyframes += keyframe;\n}), _defineProperty(_handlers, STATIC_TYPE, function (cluster, _ref4) {\n  var css = _ref4.css,\n      selector = _ref4.selector;\n\n  if (selector) {\n    cluster.statics += generateCSSRule(selector, css);\n  } else {\n    cluster.statics += css;\n  }\n}), _handlers);\n\nexport default function clusterCache(cache) {\n  var ruleOrder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  var sortedCache = objectSortByScore(cache, function (value) {\n    return getRuleScore(ruleOrder, value.pseudo);\n  });\n\n  return objectReduce(sortedCache, function (cluster, entry) {\n    var handler = handlers[entry.type];\n\n    if (handler) {\n      handler(cluster, entry);\n    }\n\n    return cluster;\n  }, {\n    mediaRules: {},\n    supportRules: {},\n    supportMediaRules: {},\n    fontFaces: '',\n    statics: '',\n    keyframes: '',\n    rules: ''\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nimport arrayReduce from 'fast-loops/lib/arrayReduce';\nimport objectReduce from 'fast-loops/lib/objectReduce';\nimport { clusterCache, cssifySupportRules, sheetMap, RULE_TYPE } from 'fela-utils';\nimport createStyleTagMarkup from './createStyleTagMarkup';\nimport getRehydrationIndex from './getRehydrationIndex';\nexport default function renderToMarkup(renderer) {\n  var cacheCluster = clusterCache(renderer.cache, renderer.ruleOrder);\n  var rehydrationIndex = getRehydrationIndex(renderer);\n  var styleMarkup = objectReduce(sheetMap, function (markup, type, key) {\n    if (cacheCluster[key].length > 0) {\n      markup += createStyleTagMarkup(cacheCluster[key], type, '', rehydrationIndex, false, renderer.styleNodeAttributes);\n    }\n\n    return markup;\n  }, '');\n  var support = cssifySupportRules(cacheCluster.supportRules);\n\n  if (support) {\n    styleMarkup += createStyleTagMarkup(support, RULE_TYPE, '', rehydrationIndex, true, renderer.styleNodeAttributes);\n  }\n\n  var mediaKeys = Object.keys(_extends({}, cacheCluster.supportMediaRules, cacheCluster.mediaRules)).sort(renderer.sortMediaQuery);\n  return arrayReduce(mediaKeys, function (markup, media) {\n    // basic media query rules\n    if (cacheCluster.mediaRules[media] && cacheCluster.mediaRules[media].length > 0) {\n      markup += createStyleTagMarkup(cacheCluster.mediaRules[media], RULE_TYPE, media, rehydrationIndex, false, renderer.styleNodeAttributes);\n    } // support media rules\n\n\n    if (cacheCluster.supportMediaRules[media]) {\n      var mediaSupport = cssifySupportRules(cacheCluster.supportMediaRules[media]);\n\n      if (mediaSupport.length > 0) {\n        markup += createStyleTagMarkup(mediaSupport, RULE_TYPE, media, rehydrationIndex, true, renderer.styleNodeAttributes);\n      }\n    }\n\n    return markup;\n  }, styleMarkup);\n}","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","arrayReduce","objectReduce","clusterCache","cssifySupportRules","sheetMap","RULE_TYPE","createStyleTagMarkup","getRehydrationIndex","renderToMarkup","renderer","cacheCluster","cache","ruleOrder","rehydrationIndex","styleMarkup","markup","type","styleNodeAttributes","support","supportRules","mediaKeys","keys","supportMediaRules","mediaRules","sort","sortMediaQuery","media","mediaSupport"],"sources":["/Users/hoodboy/Documents/htdocs/TypescriptTextEditor2/node_modules/fela-dom/es/server/renderToMarkup.js"],"sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport arrayReduce from 'fast-loops/lib/arrayReduce';\nimport objectReduce from 'fast-loops/lib/objectReduce';\nimport { clusterCache, cssifySupportRules, sheetMap, RULE_TYPE } from 'fela-utils';\n\nimport createStyleTagMarkup from './createStyleTagMarkup';\nimport getRehydrationIndex from './getRehydrationIndex';\n\nexport default function renderToMarkup(renderer) {\n  var cacheCluster = clusterCache(renderer.cache, renderer.ruleOrder);\n\n  var rehydrationIndex = getRehydrationIndex(renderer);\n\n  var styleMarkup = objectReduce(sheetMap, function (markup, type, key) {\n    if (cacheCluster[key].length > 0) {\n      markup += createStyleTagMarkup(cacheCluster[key], type, '', rehydrationIndex, false, renderer.styleNodeAttributes);\n    }\n\n    return markup;\n  }, '');\n\n  var support = cssifySupportRules(cacheCluster.supportRules);\n\n  if (support) {\n    styleMarkup += createStyleTagMarkup(support, RULE_TYPE, '', rehydrationIndex, true, renderer.styleNodeAttributes);\n  }\n\n  var mediaKeys = Object.keys(_extends({}, cacheCluster.supportMediaRules, cacheCluster.mediaRules)).sort(renderer.sortMediaQuery);\n\n  return arrayReduce(mediaKeys, function (markup, media) {\n    // basic media query rules\n    if (cacheCluster.mediaRules[media] && cacheCluster.mediaRules[media].length > 0) {\n      markup += createStyleTagMarkup(cacheCluster.mediaRules[media], RULE_TYPE, media, rehydrationIndex, false, renderer.styleNodeAttributes);\n    }\n\n    // support media rules\n    if (cacheCluster.supportMediaRules[media]) {\n      var mediaSupport = cssifySupportRules(cacheCluster.supportMediaRules[media]);\n\n      if (mediaSupport.length > 0) {\n        markup += createStyleTagMarkup(mediaSupport, RULE_TYPE, media, rehydrationIndex, true, renderer.styleNodeAttributes);\n      }\n    }\n\n    return markup;\n  }, styleMarkup);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nimport arrayReduce from 'fast-loops/lib/arrayReduce';\nimport objectReduce from 'fast-loops/lib/objectReduce';\nimport { clusterCache, cssifySupportRules, sheetMap, RULE_TYPE, KEYFRAME_TYPE, FONT_TYPE, STATIC_TYPE } from 'fela-utils';\nimport getRehydrationIndex from './getRehydrationIndex';\nexport default function renderToSheetList(renderer) {\n  var cacheCluster = clusterCache(renderer.cache, renderer.ruleOrder);\n  var rehydrationIndex = getRehydrationIndex(renderer);\n  var sheetList = objectReduce(sheetMap, function (list, type, key) {\n    if (cacheCluster[key].length > 0) {\n      list.push({\n        css: cacheCluster[key],\n        rehydration: rehydrationIndex,\n        attributes: renderer.styleNodeAttributes,\n        type: type\n      });\n    }\n\n    return list;\n  }, []);\n  var support = cssifySupportRules(cacheCluster.supportRules);\n\n  if (support) {\n    sheetList.push({\n      css: support,\n      type: RULE_TYPE,\n      rehydration: rehydrationIndex,\n      attributes: renderer.styleNodeAttributes,\n      support: true\n    });\n  }\n\n  var mediaKeys = Object.keys(_extends({}, cacheCluster.supportMediaRules, cacheCluster.mediaRules)).sort(renderer.sortMediaQuery);\n  return arrayReduce(mediaKeys, function (list, media) {\n    // basic media query rules\n    if (cacheCluster.mediaRules[media] && cacheCluster.mediaRules[media].length > 0) {\n      list.push({\n        css: cacheCluster.mediaRules[media],\n        type: RULE_TYPE,\n        rehydration: rehydrationIndex,\n        attributes: renderer.styleNodeAttributes,\n        media: media\n      });\n    } // support media rules\n\n\n    if (cacheCluster.supportMediaRules[media]) {\n      var mediaSupport = cssifySupportRules(cacheCluster.supportMediaRules[media]);\n\n      if (mediaSupport.length > 0) {\n        list.push({\n          css: mediaSupport,\n          type: RULE_TYPE,\n          rehydration: rehydrationIndex,\n          attributes: renderer.styleNodeAttributes,\n          support: true,\n          media: media\n        });\n      }\n    }\n\n    return list;\n  }, sheetList);\n}","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","arrayReduce","objectReduce","clusterCache","cssifySupportRules","sheetMap","RULE_TYPE","KEYFRAME_TYPE","FONT_TYPE","STATIC_TYPE","getRehydrationIndex","renderToSheetList","renderer","cacheCluster","cache","ruleOrder","rehydrationIndex","sheetList","list","type","push","css","rehydration","attributes","styleNodeAttributes","support","supportRules","mediaKeys","keys","supportMediaRules","mediaRules","sort","sortMediaQuery","media","mediaSupport"],"sources":["/Users/hoodboy/Documents/htdocs/TypescriptTextEditor2/node_modules/fela-dom/es/server/renderToSheetList.js"],"sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport arrayReduce from 'fast-loops/lib/arrayReduce';\nimport objectReduce from 'fast-loops/lib/objectReduce';\nimport { clusterCache, cssifySupportRules, sheetMap, RULE_TYPE, KEYFRAME_TYPE, FONT_TYPE, STATIC_TYPE } from 'fela-utils';\n\nimport getRehydrationIndex from './getRehydrationIndex';\n\nexport default function renderToSheetList(renderer) {\n  var cacheCluster = clusterCache(renderer.cache, renderer.ruleOrder);\n\n  var rehydrationIndex = getRehydrationIndex(renderer);\n\n  var sheetList = objectReduce(sheetMap, function (list, type, key) {\n    if (cacheCluster[key].length > 0) {\n      list.push({\n        css: cacheCluster[key],\n        rehydration: rehydrationIndex,\n        attributes: renderer.styleNodeAttributes,\n        type: type\n      });\n    }\n\n    return list;\n  }, []);\n\n  var support = cssifySupportRules(cacheCluster.supportRules);\n\n  if (support) {\n    sheetList.push({\n      css: support,\n      type: RULE_TYPE,\n      rehydration: rehydrationIndex,\n      attributes: renderer.styleNodeAttributes,\n      support: true\n    });\n  }\n\n  var mediaKeys = Object.keys(_extends({}, cacheCluster.supportMediaRules, cacheCluster.mediaRules)).sort(renderer.sortMediaQuery);\n\n  return arrayReduce(mediaKeys, function (list, media) {\n    // basic media query rules\n    if (cacheCluster.mediaRules[media] && cacheCluster.mediaRules[media].length > 0) {\n      list.push({\n        css: cacheCluster.mediaRules[media],\n        type: RULE_TYPE,\n        rehydration: rehydrationIndex,\n        attributes: renderer.styleNodeAttributes,\n        media: media\n      });\n    }\n\n    // support media rules\n    if (cacheCluster.supportMediaRules[media]) {\n      var mediaSupport = cssifySupportRules(cacheCluster.supportMediaRules[media]);\n\n      if (mediaSupport.length > 0) {\n        list.push({\n          css: mediaSupport,\n          type: RULE_TYPE,\n          rehydration: rehydrationIndex,\n          attributes: renderer.styleNodeAttributes,\n          support: true,\n          media: media\n        });\n      }\n    }\n\n    return list;\n  }, sheetList);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
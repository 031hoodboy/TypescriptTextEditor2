{"ast":null,"code":"import _objectWithoutProperties from \"/Users/hoodboy/Documents/htdocs/TypescriptTextEditor/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _slicedToArray from \"/Users/hoodboy/Documents/htdocs/TypescriptTextEditor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/hoodboy/Documents/htdocs/TypescriptTextEditor/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nvar _excluded = [\"src\"];\nimport { createRenderer as createFelaRenderer } from 'fela'; // @ts-ignore: formal types unavailable\n\nimport enforceLonghands from 'fela-enforce-longhands';\nimport monolithic from 'fela-monolithic';\nimport webPreset from 'fela-preset-web';\nimport { merge } from 'uinix-fp';\nimport { responsiveValue } from './plugin-responsive-value.js';\nimport { themeValue } from './plugin-theme-value.js';\nexport { createRenderer };\n/**\n * @typedef {import('fela').TPlugin} Plugin\n * @typedef {import('fela').IRenderer} Renderer\n * @typedef {import('fela').IStyle} IStyle\n * @typedef {import('../types.js').AnyProps} AnyProps\n * @typedef {import('../types.js').Config} Config\n * @typedef {import('../types.js').StyleDefinition} StyleDefinition\n * @typedef {import('../types.js').System} System\n * @typedef {import('../types.js').SystemTheme} SystemTheme\n */\n\n/**\n * Creates a Fela CSS renderer based on the system and configuration.\n *\n * @param {System} system\n * @param {Config} config\n * @returns {Renderer}\n */\n\nvar createRenderer = function createRenderer(system, config) {\n  var styles = system.styles,\n      theme = system.theme;\n  var enableAtomicCss = config.enableAtomicCss,\n      responsiveCssProperties = config.responsiveCssProperties;\n  var breakpoints = styles.breakpoints,\n      typography = styles.typography;\n  var fontFaces = typography.fontFaces;\n  var globalStyles = merge(styles.global)(typography.global); // Create enhancers\n\n  var enhancers = [enforceLonghands()];\n\n  if (!enableAtomicCss) {\n    enhancers.push(monolithic());\n  } // Create plugins (order matters)\n\n\n  var plugins = [responsiveValue({\n    breakpoints: breakpoints,\n    responsiveCssProperties: responsiveCssProperties\n  }), themeValue()].concat(_toConsumableArray(webPreset)); // Create renderer and render font faces and global styles\n\n  var renderer = createFelaRenderer({\n    enhancers: enhancers,\n    plugins: plugins\n  });\n  renderFontFaces({\n    fontFaces: fontFaces,\n    renderer: renderer\n  });\n  renderGlobalStyles({\n    globalStyles: globalStyles,\n    renderer: renderer,\n    theme: theme\n  });\n  return renderer;\n};\n/**\n * Render fonts with the renderer.\n *\n * @param {AnyProps} props\n * @returns {void}\n */\n\n\nvar renderFontFaces = function renderFontFaces(props) {\n  var fontFaces = props.fontFaces,\n      renderer = props.renderer;\n  Object.entries(fontFaces).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        fontFamily = _ref2[0],\n        fontFace = _ref2[1];\n\n    var src = fontFace.src,\n        fontProps = _objectWithoutProperties(fontFace, _excluded);\n\n    renderer.renderFont(fontFamily, src, fontProps);\n  });\n};\n/**\n * Render fonts with the renderer.\n *\n * This method is a workaround and will be removed when\n * https://github.com/uinix-js/uinix-ui/issues/6 is addressed.\n *\n * @param {object} options\n * @param {StyleDefinition} options.globalStyles\n * @param {Renderer} options.renderer\n * @param {SystemTheme} options.theme\n * @returns {void}\n */\n\n\nvar renderGlobalStyles = function renderGlobalStyles(_ref3) {\n  var globalStyles = _ref3.globalStyles,\n      renderer = _ref3.renderer,\n      theme = _ref3.theme;\n  Object.entries(globalStyles).forEach(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        selector = _ref5[0],\n        style = _ref5[1];\n\n    /** @type {Plugin[]} */\n    var plugins = []; // @ts-ignore: workaround to access renderer internals\n\n    plugins = renderer.plugins;\n    var processedStyle = plugins.reduce( // @ts-ignore\n    function (_acc, plugin) {\n      return plugin(style, 'STATIC', renderer, {\n        theme: theme\n      });\n    }, style); // @ts-ignore\n\n    renderer.renderStatic(processedStyle, selector);\n  });\n};","map":{"version":3,"names":["createRenderer","createFelaRenderer","enforceLonghands","monolithic","webPreset","merge","responsiveValue","themeValue","system","config","styles","theme","enableAtomicCss","responsiveCssProperties","breakpoints","typography","fontFaces","globalStyles","global","enhancers","push","plugins","renderer","renderFontFaces","renderGlobalStyles","props","Object","entries","forEach","fontFamily","fontFace","src","fontProps","renderFont","selector","style","processedStyle","reduce","_acc","plugin","renderStatic"],"sources":["/Users/hoodboy/Documents/htdocs/TypescriptTextEditor/node_modules/uinix-ui/lib/renderer/create-renderer.js"],"sourcesContent":["import {createRenderer as createFelaRenderer} from 'fela';\n// @ts-ignore: formal types unavailable\nimport enforceLonghands from 'fela-enforce-longhands';\nimport monolithic from 'fela-monolithic';\nimport webPreset from 'fela-preset-web';\nimport {merge} from 'uinix-fp';\n\nimport {responsiveValue} from './plugin-responsive-value.js';\nimport {themeValue} from './plugin-theme-value.js';\n\nexport {createRenderer};\n\n/**\n * @typedef {import('fela').TPlugin} Plugin\n * @typedef {import('fela').IRenderer} Renderer\n * @typedef {import('fela').IStyle} IStyle\n * @typedef {import('../types.js').AnyProps} AnyProps\n * @typedef {import('../types.js').Config} Config\n * @typedef {import('../types.js').StyleDefinition} StyleDefinition\n * @typedef {import('../types.js').System} System\n * @typedef {import('../types.js').SystemTheme} SystemTheme\n */\n\n/**\n * Creates a Fela CSS renderer based on the system and configuration.\n *\n * @param {System} system\n * @param {Config} config\n * @returns {Renderer}\n */\nconst createRenderer = (system, config) => {\n  const {styles, theme} = system;\n  const {enableAtomicCss, responsiveCssProperties} = config;\n  const {breakpoints, typography} = styles;\n  const {fontFaces} = typography;\n  const globalStyles = merge(styles.global)(typography.global);\n\n  // Create enhancers\n  const enhancers = [enforceLonghands()];\n  if (!enableAtomicCss) {\n    enhancers.push(monolithic());\n  }\n\n  // Create plugins (order matters)\n  const plugins = [\n    responsiveValue({breakpoints, responsiveCssProperties}),\n    themeValue(),\n    ...webPreset,\n  ];\n\n  // Create renderer and render font faces and global styles\n  const renderer = createFelaRenderer({enhancers, plugins});\n  renderFontFaces({fontFaces, renderer});\n  renderGlobalStyles({globalStyles, renderer, theme});\n\n  return renderer;\n};\n\n/**\n * Render fonts with the renderer.\n *\n * @param {AnyProps} props\n * @returns {void}\n */\nconst renderFontFaces = (props) => {\n  const {fontFaces, renderer} = props;\n  Object.entries(fontFaces).forEach(([fontFamily, fontFace]) => {\n    const {src, ...fontProps} = fontFace;\n    renderer.renderFont(fontFamily, src, fontProps);\n  });\n};\n\n/**\n * Render fonts with the renderer.\n *\n * This method is a workaround and will be removed when\n * https://github.com/uinix-js/uinix-ui/issues/6 is addressed.\n *\n * @param {object} options\n * @param {StyleDefinition} options.globalStyles\n * @param {Renderer} options.renderer\n * @param {SystemTheme} options.theme\n * @returns {void}\n */\nconst renderGlobalStyles = ({globalStyles, renderer, theme}) => {\n  Object.entries(globalStyles).forEach(([selector, style]) => {\n    /** @type {Plugin[]} */\n    let plugins = [];\n    // @ts-ignore: workaround to access renderer internals\n    plugins = renderer.plugins;\n\n    const processedStyle = plugins.reduce(\n      // @ts-ignore\n      (_acc, plugin) => plugin(style, 'STATIC', renderer, {theme}),\n      style,\n    );\n    // @ts-ignore\n    renderer.renderStatic(processedStyle, selector);\n  });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}